<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CPU Temp Monitoring</title>
</head>
<body style="display: grid; justify-content: space-around; background: rgb(2,0,36);
background: linear-gradient(90deg, rgba(2,0,36,1) 0%, rgba(9,9,121,1) 35%, rgba(0,212,255,1) 100%); color:whitesmoke">
    <h1>CPU Temperature Monitoring</h1>
    <div id="data-container">Monitoring CPU temperature...</div>
    <ul>
        <li id="tcp">TCP: </li>
        <li id="udp">UDP: </li>
        <li id="mqtt">MQTT: </li>
    </ul>

    <script>
        function fetchData() {
            fetch('/temperatures')
                .then(response => response.json())
                .then(data => {
                    // Update the page content with the fetched data
                    if (data["tcp"] === "-1" || !("tcp" in data)){
                        return;
                    }
                    document.getElementById('tcp').textContent = 'TCP: ' + data["tcp"] + ' °C';
                    document.getElementById('udp').textContent = 'UDP: ' + data["udp"] + ' °C';
                    document.getElementById('mqtt').textContent = 'MQTT: ' + data["mqtt"] + ' °C';
                })
                .catch(error => {
                    console.error('Error fetching data:', error);
                });
        }

        // Fetch data initially and every 5 seconds
        fetchData();
        setInterval(fetchData, 500); // 5000 milliseconds = 5 seconds
    </script>
</body>
</html>
